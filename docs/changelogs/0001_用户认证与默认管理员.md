# 变更日志: 用户认证与默认管理员
**日期**: 2025-12-09
**任务**: 接入PostgreSQL并完成基于用户名密码的JWT登录

## 📂 文件变更
### 修改 (Modified) / 新增 (New)
- `[package.json]`:
  - 增加配置、数据库、认证与验证相关依赖及类型依赖。
- `[.env]`:
  - 新增数据库连接与 JWT 密钥、有效期等环境变量配置。
- `[src/config/configuration.ts]`:
  - 新增集中配置导出，统一读取端口、数据库与 JWT 参数。
- `[src/app.module.ts]`:
  - 启用全局配置、TypeORM 连接，挂载 Users 与 Auth 模块，并在启动时创建默认管理员。
- `[src/main.ts]`:
  - 启用全局校验管道并从配置服务读取监听端口。
- `[src/users/entities/user.entity.ts]`:
  - 定义用户实体（用户名唯一、密码哈希、角色、时间戳等）。
- `[src/users/users.module.ts]` / `[src/users/users.service.ts]`:
  - 注册用户模块与仓储服务，提供按用户名查询及自动创建默认管理员能力。
- `[src/auth/*]`:
  - 新增认证模块、DTO、守卫、本地与 JWT 策略及控制器，提供 /auth/login 和 /auth/profile。

## 💡 技术说明 (Technical Notes)
- **关键点**: TypeORM 使用 `autoLoadEntities` 与 `synchronize`（开发环境）自动同步用户表；本地策略校验用户名密码，JWT 策略解析 Bearer Token 并回传用户身份；应用启动时若用户表为空自动插入 `admin/admin123` 管理员（仅代码注释说明默认密码）。
- **配置变更**: 新增 `.env` 中的数据库与 JWT 相关变量，需在本地设置后方可连接 PostgreSQL。

